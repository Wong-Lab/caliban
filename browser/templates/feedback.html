{% extends "base.html" %}

{%- block content -%}

{%- if settings['rgb'] -%}
  {% include "partials/infopane_abridged.html" %}
{%- else -%}
  {% include "partials/infopane.html" %}
{%- endif -%}

<main class="container">
  <div class="row">

    <div id="table-col" class="col s5">

      <h4>{{ title | title }}</h4>


      <div class="row">
        <div class="col s12">
          {% include "partials/feedback_legend.html" %}

          {%- if filetype == "zstack" -%}
            {% include "partials/zstack_table.html" %}
          {%- elif filetype == "track" -%}
            {% include "partials/track_table.html" %}
          {%- endif -%}
        </div>
      </div>

    </div>

    <div id="canvas-col" class="col s6 offset-s1">
      <!-- Canvas used to display image and capture user input -->
      <canvas id="canvas" class="z-depth-2"></canvas>
      <!-- Second canvas used for acutal image processing, hidden -->
      <canvas id="hidden_seg_canvas" class="hide"></canvas>
    </div>

  </div>
</main>
{%- endblock -%}

{%- block extraJs -%}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/konva/7.0.5/konva.min.js" integrity="sha512-M1bxIW2Kl+fQWEbWA59q+0qJ8yjyn0kmQeLEVmHzoC8OnJsr8zkrnNScsVRpbBDzq19LP/pwEsB+/sVW9+w+Zg==" crossorigin="anonymous"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/main_zstack.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/feedback.js') }}"></script>

  <script>
    var settings = {{settings | tojson}};
    startFeedback("{{filename}}", settings);
  </script>
{%- endblock -%}
