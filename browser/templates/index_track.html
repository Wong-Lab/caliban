<!DOCTYPE html>
<html>
  <head>
    {% include "head.html" %}
  </head>

  <body>
    <!-- START NAVBAR -->
    {% include "navigation.html" %}
    <!-- END NAVBAR -->

    <!-- START INFOPANE -->
    {% include "infopane.html" %}
    <!-- END INFOPANE -->

    <canvas width=600 height=400 id="hidden_seg_canvas"></canvas>

    <main class="container">
      <div class="row">

        <div class="col s6 left">

          <h4>Tracking Tool</h4>
          <p>Filename will be given after submit button is pressed.</p>

          <div class="row">
            <div class="col s6">
              <button id="submit" class="btn waves-effect waves-light indigo" onClick="upload()">
                Submit<i class="material-icons right">send</i>
              </button>
            </div>

            <div class="col s6">
              <div id="loading-bar" class="preloader-wrapper small">
                <div class="spinner-layer spinner-blue">
                  <div class="circle-clipper left">
                    <div class="circle"></div>
                  </div><div class="gap-patch">
                    <div class="circle"></div>
                  </div><div class="circle-clipper right">
                    <div class="circle"></div>
                  </div>
                </div>
                <div class="spinner-layer spinner-red">
                  <div class="circle-clipper left">
                    <div class="circle"></div>
                  </div><div class="gap-patch">
                    <div class="circle"></div>
                  </div><div class="circle-clipper right">
                    <div class="circle"></div>
                  </div>
                </div>
                <div class="spinner-layer spinner-yellow">
                  <div class="circle-clipper left">
                    <div class="circle"></div>
                  </div><div class="gap-patch">
                    <div class="circle"></div>
                  </div><div class="circle-clipper right">
                    <div class="circle"></div>
                  </div>
                </div>
                <div class="spinner-layer spinner-green">
                  <div class="circle-clipper left">
                    <div class="circle"></div>
                  </div><div class="gap-patch">
                    <div class="circle"></div>
                  </div><div class="circle-clipper right">
                    <div class="circle"></div>
                  </div>
                </div>
              </div>
            </div>

          </div>

          <p id="give_filename"></p>

          <table>
            <tr>
              <td>frame: </td>
              <td id="frame"></td>
            </tr>

            <tr>
              <td>highlight cells: </td>
              <td id="highlight"></td>
            </tr>

            <tr>
              <td>highlighted cells: </td>
              <td id="currently_highlighted"></td>
            </tr>

            <tr>
              <td>edit mode: </td>
              <td id="edit_mode"></td>
            </tr>

            <tr id="edit_brush_row">
              <td>brush size: </td>
              <td id="edit_brush"></td>
            </tr>

            <tr id="edit_label_row">
              <td>editing label: </td>
              <td id="edit_label"></td>
            </tr>

            <tr id="edit_erase_row">
              <td>eraser: </td>
              <td id="edit_erase"></td>
            </tr>

            <tr>
              <td>label:</td>
              <td id="label"></td>
            </tr>

            <tr>
              <td>frames:</td>
              <td><div id="frames"></div></td>
            </tr>

            <tr>
              <td>parent:</td>
              <td id="parent"></td>
            </tr>

            <tr>
              <td>daughters:</td>
              <td id="daughters"></td>
            </tr>

            <tr>
              <td>frame div:</td>
              <td id="frame_div"></td>
            </tr>

            <tr>
              <td>capped:</td>
              <td id="capped"></td>
            </tr>

            <tr>
              <td>state:</td>
              <td id="mode"></td>
            </tr>

          </table>
        </div>

        <div class="col s6 right">
          <canvas width=600 height=400 id="canvas" class="z-depth-2"></canvas>
          <div id="output"></div>
        </div>

      </div>
    </main>

    <!-- START FOOTER -->
    {% include "footer.html" %}
    <!-- END FOOTER -->

    <!-- START JS IMPORTS -->
    <!--JavaScript at end of body for optimized loading-->
    {% include "js.html" %}
    <script type="text/javascript" src="{{ url_for('static', filename='js/main_track.js') }}"></script>
    <!-- END JS IMPORTS -->

    <!-- START CALIBAN FUNCTION CALL -->
    <script>
      function upload() {
        // disable button and show loading bar
        document.getElementById("submit").classList.add("disabled");
        document.getElementById("loading-bar").classList.add("active");
        upload_file();
        document.getElementById("loading-bar").classList.remove("active");
        document.getElementById("give_filename").innerHTML = "Filename to COPY/PASTE: {{filename}}";
      }
      start_caliban("{{filename}}");
    </script>
    <!-- END CALIBAN FUNCTION CALL -->

  </body>
</html>
